---
// AbsoluteSvg.astro
export type Props = {
  x?: number | string; // es: 120 oppure "2rem" oppure "10%"
  y?: number | string; // es: 80 oppure "1.5rem"
  width?: number | string; // es: 300 oppure "12rem" (se non passi nulla usa quello dell'svg)
  height?: number | string; // es: 300 oppure "12rem"
  zIndex?: number;
  rotateDeg?: number; // opzionale
  class?: string;
  style?: string;
  ariaLabel?: string;
};

const {
  x = 0,
  y = 0,
  width,
  height,
  zIndex = 1,
  rotateDeg = 0,
  class: className,
  style,
  ariaLabel = "Decorative SVG",
} = Astro.props;

const toCss = (v: number | string) => (typeof v === "number" ? `${v}px` : v);

const inlineStyle = [
  "position:absolute",
  `left:${toCss(x)}`,
  `top:${toCss(y)}`,
  `z-index:${zIndex}`,
  rotateDeg ? `transform:rotate(${rotateDeg}deg)` : "",
  width != null ? `width:${toCss(width)}` : "",
  height != null ? `height:${toCss(height)}` : "",
  style ?? "",
]
  .filter(Boolean)
  .join("; ");
---

<div class={className} style={inlineStyle} aria-label={ariaLabel} role="img">
  <!--?xml version="1.0" encoding="UTF-8"?-->
  <!--?xml version="1.0" encoding="UTF-8"?-->
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="225" height="225" viewBox="0 0 900 900" role="img" aria-label="Social media manager illustration" preserveAspectRatio="xMidYMid meet">
  <defs>
    <linearGradient id="phoneBezel" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#1F2533"/>
      <stop offset="1" stop-color="#0E1220"/>
    </linearGradient>

    <linearGradient id="screen" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0" stop-color="#F5F7FF"/>
      <stop offset="1" stop-color="#E9EEFF"/>
    </linearGradient>

    <linearGradient id="glass" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#FFFFFF" stop-opacity="0.55"/>
      <stop offset="0.45" stop-color="#FFFFFF" stop-opacity="0.12"/>
      <stop offset="1" stop-color="#FFFFFF" stop-opacity="0"/>
    </linearGradient>

    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="10" result="blur"/>
      <feOffset dx="0" dy="14" result="off"/>
      <feColorMatrix in="off" type="matrix"
        values="0 0 0 0 0
                0 0 0 0 0
                0 0 0 0 0
                0 0 0 0.25 0" result="shadow"/>
      <feMerge>
        <feMergeNode in="shadow"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <clipPath id="screenClip">
      <rect x="300" y="170" width="300" height="560" rx="40"/>
    </clipPath>
  </defs>

  <rect width="900" height="900" fill="none"/>

  <!-- Background soft blobs (transparent-friendly; keep subtle) -->
  <path d="M120 350c80-140 250-170 380-90s160 240 50 340-320 140-430 10-70-180 0-260z"
        fill="#FFD7D8" opacity="0.55"/>
  <path d="M420 160c90-70 190-60 250-5s55 155-35 210-210 80-265 20-35-145 50-225z"
        fill="#E6D9FF" opacity="0.55"/>
  <path d="M410 590c120-90 260-90 360-10s115 220 0 300-315 105-410 10-70-175 50-300z"
        fill="#CFE8FF" opacity="0.55"/>

  <g filter="url(#softShadow)">
    <!-- Phone body -->
    <rect x="280" y="120" width="340" height="660" rx="70" fill="url(#phoneBezel)"/>
    <rect x="300" y="150" width="300" height="600" rx="55" fill="#151B2B"/>

    <!-- Screen -->
    <rect x="315" y="170" width="270" height="560" rx="40" fill="url(#screen)"/>

    <!-- Speaker / camera -->
    <rect x="415" y="150" width="70" height="10" rx="5" fill="#0A0D18" opacity="0.85"/>
    <circle cx="505" cy="155" r="5" fill="#0A0D18"/>

    <!-- Home indicator -->
    <rect x="400" y="740" width="100" height="10" rx="5" fill="#0E1220" opacity="0.75"/>

    <!-- Screen content -->
    <g clip-path="url(#screenClip)">
      <!-- Top bar -->
      <rect x="335" y="195" width="230" height="40" rx="18" fill="#FFFFFF" opacity="0.92"/>
      <circle cx="360" cy="215" r="12" fill="#1C2A4A" opacity="0.9"/>
      <rect x="382" y="207" width="110" height="12" rx="6" fill="#1C2A4A" opacity="0.28"/>
      <rect x="505" y="206" width="46" height="14" rx="7" fill="#E45B66" opacity="0.95"/>

      <!-- Post card 1 -->
      <rect x="335" y="250" width="230" height="130" rx="24" fill="#FFFFFF" opacity="0.95"/>
      <rect x="350" y="266" width="78" height="78" rx="18" fill="#E6D9FF" opacity="0.95"/>
      <rect x="440" y="270" width="110" height="12" rx="6" fill="#1C2A4A" opacity="0.28"/>
      <rect x="440" y="292" width="92" height="10" rx="5" fill="#1C2A4A" opacity="0.22"/>
      <rect x="440" y="312" width="102" height="10" rx="5" fill="#1C2A4A" opacity="0.18"/>

      <!-- Engagement row -->
      <g opacity="0.9">
        <!-- heart -->
        <path d="M445 352c0-10 8-18 18-18 6 0 11 3 14 7 3-4 8-7 14-7 10 0 18 8 18 18 0 20-32 32-32 32s-32-12-32-32z"
              fill="#E45B66"/>
        <!-- comment bubble -->
        <path d="M520 342c0-10 8-18 18-18h24c10 0 18 8 18 18v8c0 10-8 18-18 18h-10l-12 10v-10h-2c-10 0-18-8-18-18z"
              fill="#3B7DDD" opacity="0.9"/>
      </g>

      <!-- Post card 2 (analytics mini) -->
      <rect x="335" y="395" width="230" height="160" rx="24" fill="#FFFFFF" opacity="0.95"/>
      <rect x="350" y="412" width="110" height="12" rx="6" fill="#1C2A4A" opacity="0.28"/>
      <rect x="350" y="434" width="70" height="10" rx="5" fill="#1C2A4A" opacity="0.18"/>

      <!-- Chart bars -->
      <g opacity="0.95">
        <rect x="350" y="470" width="18" height="55" rx="9" fill="#1C2A4A" opacity="0.85"/>
        <rect x="377" y="455" width="18" height="70" rx="9" fill="#3B7DDD"/>
        <rect x="404" y="485" width="18" height="40" rx="9" fill="#FFB84D"/>
        <rect x="431" y="445" width="18" height="80" rx="9" fill="#E45B66"/>
        <rect x="458" y="475" width="18" height="50" rx="9" fill="#1C2A4A" opacity="0.55"/>
      </g>

      <!-- Trend line -->
      <path d="M350 535c35-30 60-20 85-40s55-70 95-25 35 70 35 70"
            fill="none" stroke="#1C2A4A" stroke-width="10" stroke-linecap="round" opacity="0.22"/>

      <!-- CTA button -->
      <rect x="350" y="560" width="140" height="44" rx="22" fill="#E45B66" opacity="0.95"/>
      <circle cx="378" cy="582" r="8" fill="#FFFFFF" opacity="0.95"/>
      <rect x="396" y="577" width="78" height="10" rx="5" fill="#FFFFFF" opacity="0.95"/>

      <!-- Bottom nav -->
      <rect x="335" y="640" width="230" height="70" rx="28" fill="#FFFFFF" opacity="0.92"/>
      <circle cx="380" cy="675" r="14" fill="#1C2A4A" opacity="0.85"/>
      <circle cx="450" cy="675" r="14" fill="#3B7DDD" opacity="0.95"/>
      <circle cx="520" cy="675" r="14" fill="#FFB84D" opacity="0.95"/>

      <!-- Glass reflection -->
      <path d="M320 175h120c-55 120-70 260-70 555H320z" fill="url(#glass)"/>
    </g>

    <!-- Floating elements: notification + schedule -->
    <g>
      <!-- Notification bubble -->
      <g filter="url(#softShadow)">
        <rect x="585" y="235" width="170" height="70" rx="28" fill="#FFFFFF" opacity="0.96"/>
        <circle cx="620" cy="270" r="12" fill="#E45B66"/>
        <rect x="642" y="258" width="90" height="10" rx="5" fill="#1C2A4A" opacity="0.25"/>
        <rect x="642" y="276" width="70" height="10" rx="5" fill="#1C2A4A" opacity="0.18"/>
        <circle cx="740" cy="252" r="16" fill="#E45B66"/>
        <text x="740" y="258" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" fill="#FFFFFF">3</text>
      </g>

      <!-- Calendar chip -->
      <g filter="url(#softShadow)">
        <rect x="145" y="585" width="190" height="80" rx="30" fill="#FFFFFF" opacity="0.96"/>
        <rect x="160" y="605" width="60" height="48" rx="16" fill="#CFE8FF" opacity="0.95"/>
        <rect x="230" y="610" width="90" height="10" rx="5" fill="#1C2A4A" opacity="0.25"/>
        <rect x="230" y="628" width="70" height="10" rx="5" fill="#1C2A4A" opacity="0.18"/>
        <path d="M176 630h28" stroke="#3B7DDD" stroke-width="10" stroke-linecap="round"/>
        <path d="M176 615h18" stroke="#E45B66" stroke-width="10" stroke-linecap="round"/>
      </g>
    </g>
  </g>
</svg>

</div>
