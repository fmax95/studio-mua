---
import SvgSwirl from "./SvgSwirl.astro";
import SvgGreenAsterisk from "./SvgGreenAsterisk.astro";

export interface Props {
  lang?: "it" | "en";
  page?: "graphicDesigner" | "socialMediaManager" | "contentCreator";
}

const { lang = "en", page = "socialMediaManager" } = Astro.props;

// Import translations dynamically
const translations = await import(`../i18n/${lang}.json`);
const t = translations.default;

// Get the specific page content
const pageContent = t[page];

const content = {
  title: pageContent.whatYouNeedTitle || "What you need is",
  description: pageContent.whatYouNeedDescription || "",
  cards: [
    {
      text: pageContent.card1 || "",
      color: "beige",
    },
    {
      text: pageContent.card2 || "",
      color: "pink",
    },
    {
      text: pageContent.card3 || "",
      color: "green",
    },
    {
      text: pageContent.card4 || "",
      color: "mint",
    },
  ],
};
---

<section class="what-you-need-section">
  <div class="what-you-need-container">
    <h1 class="section-title script">{content.title}</h1>
    <p class="section-description">{content.description}</p>

    <div class="cards-grid">
      <!-- Card 1 - Beige with Swirl -->
      <div class="need-card card-beige swirl-card">
        <SvgSwirl x="-15px" y="-15px" width="50px" height="50px" zIndex={2} color="var(--pink)" />
        <p class="card-text" set:html={content.cards[0].text}></p>
      </div>

      <!-- Card 2 - Pink -->
      <div class="need-card card-pink">
        <p class="card-text" set:html={content.cards[1].text}></p>
      </div>

      <!-- Card 3 - Green -->
      <div class="need-card card-green">
        <p class="card-text" set:html={content.cards[2].text}></p>
      </div>

      <!-- Card 4 - Mint with Asterisk -->
      <div class="need-card card-mint asterisk-card">
        <p class="card-text" set:html={content.cards[3].text}></p>
        <SvgGreenAsterisk
          x="calc(100% - 25px)"
          y="calc(100% - 25px)"
          width="50px"
          height="50px"
          zIndex={2}
        />
      </div>
    </div>
  </div>
</section>

<style>
  .what-you-need-section {
    width: 100%;
    background-color: var(--blue);
    padding: 100px 20px 80px;
    border-bottom: 60px solid var(--white);
  }

  .what-you-need-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .section-title {
    font-family: var(--font-title);
    font-size: var(--fs-h1);
    color: var(--brown);
    text-align: center;
    margin-bottom: 60px;
    font-weight: 900;
    display: block;
    letter-spacing: -0.03em;
  }

  .section-description {
    color: var(--brown);
    text-align: center;
    max-width: 800px;
    margin: 0 auto 80px;
    line-height: 1.2;
    font-size: var(--fs-body);
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }

  .need-card {
    padding: 30px 25px;
    border-radius: 16px;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .swirl-card,
  .asterisk-card {
    position: relative;
    overflow: visible;
  }

  .card-beige {
    background-color: #D7E1EA;
  }

  .card-pink {
    background-color: var(--pink);
  }

  .card-green {
    background-color: var(--green);
  }

  .card-mint {
    background-color: #D7E1EA;
  }

  .card-text {
    color: var(--brown);
    text-align: center;
    margin: 0;
    line-height: 1.2;
    font-size: var(--fs-body);
  }

  .card-text :global(strong) {
    font-weight: 700;
  }

  /* Responsive */
  @media (max-width: 600px) {
    .cards-grid {
      grid-template-columns: 1fr;
    }

    .what-you-need-section {
      padding: 40px 15px 60px;
    }

    .need-card {
      padding: 25px 20px;
    }
  }
</style>
